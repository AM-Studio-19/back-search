<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>晨迷AM Studio | 補色查詢系統</title>
  <!-- 引入 Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入字型 -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans TC', sans-serif; background-color: #fcfcfc; }
    /* 自定義背景紋理 */
    .bg-pattern {
      background-image: radial-gradient(#ffe4e6 1px, transparent 1px);
      background-size: 20px 20px;
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 241, 242, 0.5);
    }
    .collapsible-content { 
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
      max-height: 0; 
      overflow: hidden; 
      opacity: 0; 
      transform: translateY(-10px);
    }
    .collapsible-content.expanded { 
      max-height: 1000px; 
      opacity: 1; 
      transform: translateY(0);
    }
    .animate-enter { animation: slideIn 0.5s ease-out forwards; opacity: 0; transform: translateY(20px); }
    @keyframes slideIn { to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="bg-pattern min-h-screen text-gray-700">

  <!-- 置頂標題區 -->
  <div class="sticky top-0 z-50 glass-card border-b border-pink-100 shadow-sm">
    <div class="max-w-xl mx-auto px-4 py-3 flex items-center justify-center">
      <h1 class="text-xl font-bold text-gray-800 tracking-wide">晨迷 AM Studio</h1>
    </div>
  </div>

  <div class="max-w-xl mx-auto p-4 sm:p-6 pb-20">
    
    <!-- 搜尋卡片 -->
    <div class="bg-white p-6 rounded-2xl shadow-xl shadow-pink-100/50 mb-8 border border-white">
      <h2 class="text-2xl font-bold text-center mb-1 text-gray-800">補色期限查詢</h2>
      <p class="text-center text-gray-400 text-sm mb-6">輸入姓名或電話號碼查詢您的專屬優惠</p>
      
      <div class="relative">
        <input type="text" id="queryInput" placeholder="例如：林小美 或 0912..." 
               class="w-full p-4 pl-5 rounded-xl bg-gray-50 border border-gray-200 text-lg focus:outline-none focus:ring-2 focus:ring-pink-300 focus:bg-white transition-all placeholder-gray-400"
               onkeydown="if(event.key === 'Enter') searchRecord()">
      </div>

      <button onclick="searchRecord()" id="searchButton" 
              class="w-full mt-4 p-3.5 bg-gradient-to-r from-[#ff99aa] to-[#ff7a8b] hover:from-[#ff889b] hover:to-[#ff6075] text-white font-bold rounded-xl text-lg shadow-lg shadow-pink-200 transition-all transform active:scale-95 flex justify-center items-center">
        <span>立即查詢</span>
        <!-- Loading Icon -->
        <svg id="loadingIndicator" class="hidden animate-spin h-5 w-5 text-white ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
      </button>

      <!-- 訊息顯示區 -->
      <div id="messageArea" class="hidden mt-4 text-center p-3 rounded-xl text-sm font-medium animate-pulse"></div>
    </div>

    <!-- 結果顯示區 -->
    <div id="resultsArea" class="space-y-6"></div>

    <!-- Footer -->
    <footer class="mt-12 text-center text-xs text-gray-400">
      <p>&copy; 晨迷 AM Studio. All rights reserved.</p>
    </footer>
  </div>

<script>
  // ❗❗❗ 請在這裡填入你的 Apps Script 網址 ❗❗❗
  const GAS_API_URL = "https://script.google.com/macros/s/AKfycbyIEhPfYUcaDRwCHDppgwta3eeo1OP1Gw2YgBW1Kxka4dizbTgJPwdgtiu1OnNAkv9h/exec"; 

  function toggleCollapse(btn, contentId) {
    const content = document.getElementById(contentId);
    const isExpanded = content.classList.toggle('expanded');
    const icon = btn.querySelector('.icon-arrow');
    icon.style.transform = isExpanded ? 'rotate(180deg)' : 'rotate(0deg)';
    btn.querySelector('.btn-text').textContent = isExpanded ? '收起詳細價目' : '查看完整價目表';
  }
